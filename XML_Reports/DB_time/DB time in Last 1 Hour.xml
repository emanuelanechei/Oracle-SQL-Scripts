<?xml version="1.0" encoding="UTF-8" ?>
<displays>
<display id="c4c3dbba-017c-1000-800c-0afb000eb93a" type="" style="Chart" enable="true">
	<name><![CDATA[DB time in Last 1 Hour]]></name>
	<description><![CDATA[]]></description>
	<tooltip><![CDATA[DB time in Last 1 Hour]]></tooltip>
	<drillclass><![CDATA[]]></drillclass>
	<CustomValues>
		<Y1AXIS_TITLE_TEXT><![CDATA[Minutes]]></Y1AXIS_TITLE_TEXT>
		<Y2AXIS_SCALE_MAXIMUM><![CDATA[80.0]]></Y2AXIS_SCALE_MAXIMUM>
		<XAXIS_TICK_LABEL_FONT.COLOR><![CDATA[-12565927]]></XAXIS_TICK_LABEL_FONT.COLOR>
		<LEGEND_LOCATION><![CDATA[AUTOMATIC]]></LEGEND_LOCATION>
		<PLOT_SERIES_OPTIONS_COLOR><![CDATA[\,-16742958,-3394816,-10066279,-16751002,-26368]]></PLOT_SERIES_OPTIONS_COLOR>
		<Y1AXIS_TITLE_FONT.POSTURE><![CDATA[false]]></Y1AXIS_TITLE_FONT.POSTURE>
		<Y1AXIS_NUMBER_FORMATS.TYPE><![CDATA[NUMBER]]></Y1AXIS_NUMBER_FORMATS.TYPE>
		<Y1AXIS_SCALE_MAXIMUM><![CDATA[210.0]]></Y1AXIS_SCALE_MAXIMUM>
		<XAXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></XAXIS_TICK_LABEL_ROTATE>
		<TYPE><![CDATA[BAR_VERT_STACK]]></TYPE>
		<XAXIS_TITLE_FONT.WEIGHT><![CDATA[true]]></XAXIS_TITLE_FONT.WEIGHT>
		<STYLE><![CDATA[Default]]></STYLE>
		<TITLE_ALIGNMENT><![CDATA[LEFT]]></TITLE_ALIGNMENT>
		<XAXIS_TICK_LABEL_FONT.NAME><![CDATA[Arial]]></XAXIS_TICK_LABEL_FONT.NAME>
		<Y1AXIS_TITLE_FONT.NAME><![CDATA[Arial]]></Y1AXIS_TITLE_FONT.NAME>
		<Y1AXIS_TITLE_FONT.SIZE><![CDATA[12]]></Y1AXIS_TITLE_FONT.SIZE>
		<Y1AXIS_TICK_LABEL_FONT.WEIGHT><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.WEIGHT>
		<Y2AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y2AXIS_TICK_LABEL_ROTATE>
		<Y1AXIS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT><![CDATA[BRACKETED]]></Y1AXIS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT>
		<XAXIS_TITLE_FONT.COLOR><![CDATA[-9144422]]></XAXIS_TITLE_FONT.COLOR>
		<Y2AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y2AXIS_LINE_WIDTH>
		<Y1AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y1AXIS_TICK_LABEL_ROTATE>
		<XAXIS_TITLE_FONT.POSTURE><![CDATA[false]]></XAXIS_TITLE_FONT.POSTURE>
		<XAXIS_TITLE_TEXT><![CDATA[Snap Date Time]]></XAXIS_TITLE_TEXT>
		<PLOT_HGRID_WIDTH><![CDATA[THINNER]]></PLOT_HGRID_WIDTH>
		<Y1AXIS_SCALE_INCREMENT><![CDATA[30.0]]></Y1AXIS_SCALE_INCREMENT>
		<Y1AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y1AXIS_LINE_WIDTH>
		<Y1AXIS_TITLE_ALIGNMENT><![CDATA[RIGHT]]></Y1AXIS_TITLE_ALIGNMENT>
		<Y1AXIS_TICK_LABEL_FONT.COLOR><![CDATA[-12565927]]></Y1AXIS_TICK_LABEL_FONT.COLOR>
		<LEGEND_ALIGNMENT><![CDATA[LEFT]]></LEGEND_ALIGNMENT>
		<XAXIS_LINE_WIDTH><![CDATA[THINNEST]]></XAXIS_LINE_WIDTH>
		<Y1AXIS_TICK_LABEL_FONT.POSTURE><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.POSTURE>
		<XAXIS_TICK_LABEL_FONT.SIZE><![CDATA[12]]></XAXIS_TICK_LABEL_FONT.SIZE>
		<XAXIS_TITLE_ALIGNMENT><![CDATA[RIGHT]]></XAXIS_TITLE_ALIGNMENT>
		<Y1AXIS_TICK_LABEL_FONT.NAME><![CDATA[Arial]]></Y1AXIS_TICK_LABEL_FONT.NAME>
		<Y1AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y1AXIS_LOGARITHMIC_BASE>
		<GRID_WIDTH><![CDATA[THINNER]]></GRID_WIDTH>
		<PLOT_DATALABELS_BAR_POSITION><![CDATA[ABOVE]]></PLOT_DATALABELS_BAR_POSITION>
		<FOOTNOTE_ALIGNMENT><![CDATA[LEFT]]></FOOTNOTE_ALIGNMENT>
		<XAXIS_TICK_LABEL_SKIP_MODE><![CDATA[AUTOMATIC]]></XAXIS_TICK_LABEL_SKIP_MODE>
		<XAXIS_TICK_LABEL_FONT.UNDERLINE><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.UNDERLINE>
		<Y1AXIS_NUMBER_FORMATS.SCALE_FACTOR><![CDATA[NONE]]></Y1AXIS_NUMBER_FORMATS.SCALE_FACTOR>
		<Y1AXIS_NUMBER_FORMATS.CURRENCY_SYMBOL><![CDATA[DOLLARS]]></Y1AXIS_NUMBER_FORMATS.CURRENCY_SYMBOL>
		<Y1AXIS_TICK_LABEL_FONT.SIZE><![CDATA[12]]></Y1AXIS_TICK_LABEL_FONT.SIZE>
		<Y2AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y2AXIS_LOGARITHMIC_BASE>
		<XAXIS_TITLE_FONT.UNDERLINE><![CDATA[false]]></XAXIS_TITLE_FONT.UNDERLINE>
		<Y2AXIS_SCALE_MINIMUM><![CDATA[10.0]]></Y2AXIS_SCALE_MINIMUM>
		<XAXIS_TITLE><![CDATA[true]]></XAXIS_TITLE>
		<Y1AXIS_TICK_LABEL_FONT.UNDERLINE><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.UNDERLINE>
		<THREED><![CDATA[true]]></THREED>
		<Y1AXIS_TITLE_FONT.COLOR><![CDATA[-9144422]]></Y1AXIS_TITLE_FONT.COLOR>
		<Y1AXIS_NUMBER_FORMATS.DECIMAL_PLACES><![CDATA[2]]></Y1AXIS_NUMBER_FORMATS.DECIMAL_PLACES>
		<XAXIS_TICK_LABEL_FONT.POSTURE><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.POSTURE>
		<XAXIS_TITLE_FONT.NAME><![CDATA[Arial]]></XAXIS_TITLE_FONT.NAME>
		<Y1AXIS_TITLE_FONT.WEIGHT><![CDATA[true]]></Y1AXIS_TITLE_FONT.WEIGHT>
		<XAXIS_TITLE_FONT.SIZE><![CDATA[12]]></XAXIS_TITLE_FONT.SIZE>
		<Y1AXIS_TITLE><![CDATA[true]]></Y1AXIS_TITLE>
		<Y2AXIS_SCALE_INCREMENT><![CDATA[20.0]]></Y2AXIS_SCALE_INCREMENT>
		<PLOT_VGRID_WIDTH><![CDATA[THINNER]]></PLOT_VGRID_WIDTH>
		<Y2AXIS_TITLE_ALIGNMENT><![CDATA[CENTER]]></Y2AXIS_TITLE_ALIGNMENT>
		<Y1AXIS_TITLE_FONT.UNDERLINE><![CDATA[false]]></Y1AXIS_TITLE_FONT.UNDERLINE>
		<SUBTITLE_ALIGNMENT><![CDATA[LEFT]]></SUBTITLE_ALIGNMENT>
		<XAXIS_TICK_LABEL_FONT.WEIGHT><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.WEIGHT>
	</CustomValues>
	<query>
		<sql><![CDATA[WITH st AS
(
  SELECT snap_id
       , dbid
       , instance_number
       , end_interval_time
  FROM dba_hist_snapshot
),
stm AS
(
  SELECT snap_id
       , dbid
       , instance_number
       , stat_name
       , value
  FROM dba_hist_sys_time_model
  WHERE stat_name = 'DB time'
),
dbtime_per_hour AS
(
  SELECT CAST(st.end_interval_time AS DATE) snap_date_time
       , stm.stat_name
       , ROUND((stm.value - LAG(stm.value, 1, 0) OVER (PARTITION BY stm.dbid, stm.instance_number ORDER BY stm.snap_id))/1e6/6e1, 2) dbtime
  FROM st
     , stm
  WHERE st.snap_id = stm.snap_id
  AND   st.instance_number = stm.instance_number
  AND   st.dbid = stm.dbid
  AND   CAST(st.end_interval_time AS DATE) >= SYSDATE - INTERVAL '2' HOUR  -- http://blog.sina.com.cn/s/blog_6d18c1420102v1z7.html
  ORDER BY snap_date_time
)
SELECT snap_date_time
     , stat_name
     , dbtime
FROM dbtime_per_hour
WHERE dbtime NOT IN (SELECT MAX(dbtime) FROM dbtime_per_hour)]]></sql>
	</query>
</display>
</displays>