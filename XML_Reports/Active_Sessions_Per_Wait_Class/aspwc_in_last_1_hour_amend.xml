<?xml version="1.0" encoding="UTF-8" ?>
<displays>
<display id="61bad987-017d-1000-8011-0afb000e9bf3" type="" style="Chart" enable="true">
	<name><![CDATA[Active Sessions Per Wait Class from EMCC 13.5 in Last 1 Hour]]></name>
	<description><![CDATA[]]></description>
	<tooltip><![CDATA[Active Sessions Per Wait Class from EMCC 13.5 in Last 1 Hour]]></tooltip>
	<drillclass><![CDATA[]]></drillclass>
	<CustomValues>
		<LEGEND_LOCATION><![CDATA[RIGHT]]></LEGEND_LOCATION>
		<PLOT_SERIES_OPTIONS_COLOR><![CDATA[\,-13253753,-5637988,-3413811,-16747830,-16458018,-7642935,-41928,-20154,-330883,-13240,-16727824,-3819621,-3423569,-562514]]></PLOT_SERIES_OPTIONS_COLOR>
		<TITLE_FONT.POSTURE><![CDATA[false]]></TITLE_FONT.POSTURE>
		<Y1AXIS_NUMBER_FORMATS.TYPE><![CDATA[NUMBER]]></Y1AXIS_NUMBER_FORMATS.TYPE>
		<PLOT_DATALABELS_FONT.NAME><![CDATA[Arial]]></PLOT_DATALABELS_FONT.NAME>
		<TYPE><![CDATA[AREA_VERT_STACK]]></TYPE>
		<STYLE><![CDATA[Default]]></STYLE>
		<TITLE_ALIGNMENT><![CDATA[CENTER]]></TITLE_ALIGNMENT>
		<XAXIS_TICK_LABEL_FONT.NAME><![CDATA[Arial]]></XAXIS_TICK_LABEL_FONT.NAME>
		<Y1AXIS_TITLE_FONT.SIZE><![CDATA[12]]></Y1AXIS_TITLE_FONT.SIZE>
		<TITLE_TEXT><![CDATA[Active Sessions Per Wait Class from EMCC 13.5 in Last 1 Hour]]></TITLE_TEXT>
		<Y2AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y2AXIS_TICK_LABEL_ROTATE>
		<Y1AXIS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT><![CDATA[BRACKETED]]></Y1AXIS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT>
		<XAXIS_TITLE_FONT.COLOR><![CDATA[-9144422]]></XAXIS_TITLE_FONT.COLOR>
		<Y1AXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></Y1AXIS_TICK_LABEL_ROTATE>
		<XAXIS_TITLE_TEXT><![CDATA[Sample Time]]></XAXIS_TITLE_TEXT>
		<PLOT_HGRID_WIDTH><![CDATA[THINNER]]></PLOT_HGRID_WIDTH>
		<XAXIS_TICK_LABEL_AUTO_ROTATE><![CDATA[false]]></XAXIS_TICK_LABEL_AUTO_ROTATE>
		<Y1AXIS_SCALE_INCREMENT><![CDATA[30.0]]></Y1AXIS_SCALE_INCREMENT>
		<PLOT_SERIES_OPTIONS_FITLINE_TYPE><![CDATA[\,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE,NONE]]></PLOT_SERIES_OPTIONS_FITLINE_TYPE>
		<Y1AXIS_TITLE_ALIGNMENT><![CDATA[RIGHT]]></Y1AXIS_TITLE_ALIGNMENT>
		<PLOT_DATALABELS_NUMBER_FORMATS.CURRENCY_SYMBOL><![CDATA[DOLLARS]]></PLOT_DATALABELS_NUMBER_FORMATS.CURRENCY_SYMBOL>
		<LEGEND_FONT.SIZE><![CDATA[11]]></LEGEND_FONT.SIZE>
		<XAXIS_LINE_WIDTH><![CDATA[THINNEST]]></XAXIS_LINE_WIDTH>
		<XAXIS_TICK_LABEL_FONT.SIZE><![CDATA[12]]></XAXIS_TICK_LABEL_FONT.SIZE>
		<XAXIS_TITLE_ALIGNMENT><![CDATA[RIGHT]]></XAXIS_TITLE_ALIGNMENT>
		<LEGEND_FONT.POSTURE><![CDATA[false]]></LEGEND_FONT.POSTURE>
		<Y1AXIS_TICK_LABEL_FONT.NAME><![CDATA[Arial]]></Y1AXIS_TICK_LABEL_FONT.NAME>
		<Y1AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y1AXIS_LOGARITHMIC_BASE>
		<FOOTNOTE_ALIGNMENT><![CDATA[LEFT]]></FOOTNOTE_ALIGNMENT>
		<LEGEND_FONT.COLOR><![CDATA[-12565927]]></LEGEND_FONT.COLOR>
		<PLOT_DATALABELS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT><![CDATA[BRACKETED]]></PLOT_DATALABELS_NUMBER_FORMATS.NEGATIVE_NUMBER_FORMAT>
		<Y2AXIS_LOGARITHMIC_BASE><![CDATA[BASE_10]]></Y2AXIS_LOGARITHMIC_BASE>
		<LEGEND_FONT.WEIGHT><![CDATA[false]]></LEGEND_FONT.WEIGHT>
		<TITLE_FONT.WEIGHT><![CDATA[true]]></TITLE_FONT.WEIGHT>
		<Y2AXIS_SCALE_MINIMUM><![CDATA[10.0]]></Y2AXIS_SCALE_MINIMUM>
		<Y1AXIS_NUMBER_FORMATS.DECIMAL_PLACES><![CDATA[2]]></Y1AXIS_NUMBER_FORMATS.DECIMAL_PLACES>
		<XAXIS_TICK_LABEL_FONT.POSTURE><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.POSTURE>
		<DATA_MAP_VALUES><![CDATA[\,"ACTIVE_SESSIONS"]]></DATA_MAP_VALUES>
		<XAXIS_TITLE_FONT.NAME><![CDATA[Arial]]></XAXIS_TITLE_FONT.NAME>
		<PLOT_DATALABELS_FONT.WEIGHT><![CDATA[false]]></PLOT_DATALABELS_FONT.WEIGHT>
		<Y1AXIS_TITLE_FONT.WEIGHT><![CDATA[true]]></Y1AXIS_TITLE_FONT.WEIGHT>
		<Y1AXIS_TITLE><![CDATA[true]]></Y1AXIS_TITLE>
		<Y2AXIS_SCALE_INCREMENT><![CDATA[20.0]]></Y2AXIS_SCALE_INCREMENT>
		<PLOT_VGRID_WIDTH><![CDATA[THINNER]]></PLOT_VGRID_WIDTH>
		<Y2AXIS_TITLE_ALIGNMENT><![CDATA[CENTER]]></Y2AXIS_TITLE_ALIGNMENT>
		<Y1AXIS_TITLE_FONT.UNDERLINE><![CDATA[false]]></Y1AXIS_TITLE_FONT.UNDERLINE>
		<XAXIS_TICK_LABEL_SKIP_COUNT><![CDATA[3]]></XAXIS_TICK_LABEL_SKIP_COUNT>
		<Y1AXIS_TITLE_TEXT><![CDATA[Active Sessions]]></Y1AXIS_TITLE_TEXT>
		<Y2AXIS_SCALE_MAXIMUM><![CDATA[80.0]]></Y2AXIS_SCALE_MAXIMUM>
		<XAXIS_TICK_LABEL_FONT.COLOR><![CDATA[-12565927]]></XAXIS_TICK_LABEL_FONT.COLOR>
		<PLOT_DATALABELS_FONT.SIZE><![CDATA[12]]></PLOT_DATALABELS_FONT.SIZE>
		<PLOT_SERIES_OBJECT_COUNT><![CDATA[14]]></PLOT_SERIES_OBJECT_COUNT>
		<Y1AXIS_TITLE_FONT.POSTURE><![CDATA[false]]></Y1AXIS_TITLE_FONT.POSTURE>
		<PLOT_DATALABELS_NUMBER_FORMATS.SCALE_FACTOR><![CDATA[NONE]]></PLOT_DATALABELS_NUMBER_FORMATS.SCALE_FACTOR>
		<DATA_MAP_COLUMNS><![CDATA[\,"SAMPLE_TIME"]]></DATA_MAP_COLUMNS>
		<Y1AXIS_SCALE_MAXIMUM><![CDATA[210.0]]></Y1AXIS_SCALE_MAXIMUM>
		<XAXIS_TICK_LABEL_ROTATE><![CDATA[HORIZONTAL]]></XAXIS_TICK_LABEL_ROTATE>
		<PLOT_DATALABELS_FONT.POSTURE><![CDATA[false]]></PLOT_DATALABELS_FONT.POSTURE>
		<XAXIS_TITLE_FONT.WEIGHT><![CDATA[true]]></XAXIS_TITLE_FONT.WEIGHT>
		<Y1AXIS_TITLE_FONT.NAME><![CDATA[Arial]]></Y1AXIS_TITLE_FONT.NAME>
		<Y1AXIS_TICK_LABEL_FONT.WEIGHT><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.WEIGHT>
		<Y2AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y2AXIS_LINE_WIDTH>
		<TITLE_FONT.UNDERLINE><![CDATA[false]]></TITLE_FONT.UNDERLINE>
		<TITLE_FONT.NAME><![CDATA[Arial]]></TITLE_FONT.NAME>
		<PLOT_DATALABELS_NUMBER_FORMATS.TYPE><![CDATA[NUMBER]]></PLOT_DATALABELS_NUMBER_FORMATS.TYPE>
		<XAXIS_TITLE_FONT.POSTURE><![CDATA[false]]></XAXIS_TITLE_FONT.POSTURE>
		<TITLE_FONT.COLOR><![CDATA[-12565927]]></TITLE_FONT.COLOR>
		<TITLE_FONT.SIZE><![CDATA[12]]></TITLE_FONT.SIZE>
		<PLOT_DATATIPS_CUMULATIVE_VALUE><![CDATA[false]]></PLOT_DATATIPS_CUMULATIVE_VALUE>
		<Y1AXIS_LINE_WIDTH><![CDATA[THINNEST]]></Y1AXIS_LINE_WIDTH>
		<Y1AXIS_TICK_LABEL_FONT.COLOR><![CDATA[-12565927]]></Y1AXIS_TICK_LABEL_FONT.COLOR>
		<LEGEND_ALIGNMENT><![CDATA[LEFT]]></LEGEND_ALIGNMENT>
		<Y1AXIS_TICK_LABEL_FONT.POSTURE><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.POSTURE>
		<PLOT_DATALABELS><![CDATA[false]]></PLOT_DATALABELS>
		<LEGEND_FONT.NAME><![CDATA[Arial]]></LEGEND_FONT.NAME>
		<GRID_WIDTH><![CDATA[THINNER]]></GRID_WIDTH>
		<PLOT_DATALABELS_FONT.UNDERLINE><![CDATA[false]]></PLOT_DATALABELS_FONT.UNDERLINE>
		<XAXIS_TICK_LABEL_SKIP_MODE><![CDATA[MANUAL]]></XAXIS_TICK_LABEL_SKIP_MODE>
		<XAXIS_TICK_LABEL_FONT.UNDERLINE><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.UNDERLINE>
		<Y1AXIS_NUMBER_FORMATS.SCALE_FACTOR><![CDATA[NONE]]></Y1AXIS_NUMBER_FORMATS.SCALE_FACTOR>
		<Y1AXIS_NUMBER_FORMATS.CURRENCY_SYMBOL><![CDATA[DOLLARS]]></Y1AXIS_NUMBER_FORMATS.CURRENCY_SYMBOL>
		<LEGEND_FONT.UNDERLINE><![CDATA[false]]></LEGEND_FONT.UNDERLINE>
		<Y1AXIS_TICK_LABEL_FONT.SIZE><![CDATA[12]]></Y1AXIS_TICK_LABEL_FONT.SIZE>
		<DATA_MAP_COLNAMES><![CDATA[\,"ACTIVE_SESSIONS","METRIC_NAME","SAMPLE_TIME"]]></DATA_MAP_COLNAMES>
		<DATA_MAP_SERIES><![CDATA[\,"METRIC_NAME"]]></DATA_MAP_SERIES>
		<PLOT_DATALABELS_NUMBER_FORMATS.DECIMAL_PLACES><![CDATA[3]]></PLOT_DATALABELS_NUMBER_FORMATS.DECIMAL_PLACES>
		<XAXIS_TITLE_FONT.UNDERLINE><![CDATA[false]]></XAXIS_TITLE_FONT.UNDERLINE>
		<XAXIS_TITLE><![CDATA[true]]></XAXIS_TITLE>
		<Y1AXIS_TICK_LABEL_FONT.UNDERLINE><![CDATA[false]]></Y1AXIS_TICK_LABEL_FONT.UNDERLINE>
		<THREED><![CDATA[false]]></THREED>
		<Y1AXIS_TITLE_FONT.COLOR><![CDATA[-9144422]]></Y1AXIS_TITLE_FONT.COLOR>
		<PLOT_DATALABELS_FONT.COLOR><![CDATA[-12895429]]></PLOT_DATALABELS_FONT.COLOR>
		<TITLE><![CDATA[true]]></TITLE>
		<XAXIS_TITLE_FONT.SIZE><![CDATA[12]]></XAXIS_TITLE_FONT.SIZE>
		<SUBTITLE_ALIGNMENT><![CDATA[LEFT]]></SUBTITLE_ALIGNMENT>
		<XAXIS_TICK_LABEL_FONT.WEIGHT><![CDATA[false]]></XAXIS_TICK_LABEL_FONT.WEIGHT>
	</CustomValues>
	<query>
		<sql><![CDATA[WITH
all_cpu AS
(
  SELECT TO_CHAR(end_time, 'hh24:mi:ss') sample_time
       , DECODE(metric_name, 'CPU Usage Per Sec', 'CPU') metric_name
       , ROUND(value/1e2, 3) active_sessions
  FROM v$sysmetric_history
  WHERE metric_name = 'CPU Usage Per Sec'
  AND   group_id = 2
  AND   end_time >= SYSDATE - INTERVAL '60' MINUTE
  ORDER BY sample_time
),
db_wait AS
(
  SELECT TO_CHAR(end_time, 'hh24:mi:ss') sample_time
         , MAX(DECODE(metric_name, 'Database Time Per Sec'   , value/1e2)) aas_value
         , MAX(DECODE(metric_name, 'Database Wait Time Ratio', value/1e2)) wait_ratio
  FROM v$sysmetric_history
  WHERE metric_name IN ('Database Time Per Sec', 'Database Wait Time Ratio')
  AND   group_id = 2
  AND   end_time >= SYSDATE - INTERVAL '60' MINUTE
  GROUP BY TO_CHAR(end_time, 'hh24:mi:ss')
  ORDER BY sample_time
),
cpu_used AS
(
  SELECT sample_time
       , 'CPU Used' metric_name
       , ROUND(aas_value*(1-wait_ratio), 3) active_sessions
  FROM db_wait
),
cpu_wait AS
(
  SELECT cu.sample_time
       , 'CPU Wait' metric_name
       , ac.active_sessions - cu.active_sessions active_sessions
  FROM all_cpu  ac
     , cpu_used cu
  WHERE ac.sample_time = cu.sample_time
),
en_wc AS
(
  SELECT DISTINCT wait_class_id
       , wait_class
  FROM v$event_name
),
wait_class AS
(
  SELECT TO_CHAR(wcmh.end_time, 'hh24:mi:ss') sample_time
       , ew.wait_class metric_name
       , ROUND(wcmh.time_waited_fg/wcmh.intsize_csec, 3) active_sessions
  FROM v$waitclassmetric_history wcmh
     , en_wc ew
  WHERE wcmh.wait_class_id = ew.wait_class_id
  AND   ew.wait_class <> 'Idle'
  AND   wcmh.end_time >= SYSDATE - INTERVAL '60' MINUTE
  ORDER BY DECODE(ew.wait_class, 'Scheduler'     , 1
                               , 'User I/O'      , 2
                               , 'System I/O'    , 3
                               , 'Concurrency'   , 4
                               , 'Application'   , 5
                               , 'Commit'        , 6
                               , 'Configuration' , 7
                               , 'Administrative', 8
                               , 'Network'       , 9
                               , 'Queueing'      , 10
                               , 'Cluster'       , 11
                               , 'Other'         , 12
                 )
         , sample_time
)
SELECT * FROM cpu_used
UNION ALL
SELECT * FROM cpu_wait
UNION ALL
SELECT * FROM wait_class]]></sql>
	</query>
</display>
</displays>
